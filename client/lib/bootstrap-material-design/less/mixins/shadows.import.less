@levels: 12;

.make-shadows() {
  .shadow(@index) when (@index =< @levels) {
    .shadow-z-@{index} {
      .shadow-z(@index);
    }
    .shadow((@index + 1));
  }
  .shadow(0);
}

.shadow-z(@index) {
  @shadow-opacity: (.25/@levels)*@index + .15;

  box-shadow: 0 (1px * @index) (4px * @index) rgba(0, 0, 0, @shadow-opacity), 0 (2px * @index) (6px * @index) rgba(0, 0, 0, @shadow-opacity);
  transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: max(@index * 10, 1);
}
